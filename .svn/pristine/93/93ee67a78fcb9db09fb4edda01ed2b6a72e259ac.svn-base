<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>[[${str}]] | 会员卡规则管理</title>
<link th:href="@{{sp}/css/bootstrap.min.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/font-awesome/css/font-awesome.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/css/animate.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/css/style.css(sp=${pub_bucket})}" rel="stylesheet">
</head>

<body>
    <div id="wrapper">
        <div th:replace="../common/nav"></div>
        <div id="page-wrapper" class="gray-bg">
            <div th:replace="../common/top"></div>
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-sm-4">
                    <h2>会员卡明细查询</h2>
                    <ol class="breadcrumb">
                        <li><a href="index.html">Home</a></li>
                        <li class="active"><strong>会员卡</strong></li>
                    </ol>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="wrapper wrapper-content animated fadeInUp">

                        <div class="ibox">
                            <div class="ibox-title">
                                <h5>会员卡信息</h5>
                                <div class="ibox-tools">
                             <!--        <a href="javascript:void(0)" class="btn btn-primary btn-xs add_member">添加会员卡</a> -->
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div class="row m-b-sm m-t-sm">
                                    <div class="col-sm-9 m-b-xs">
                                        <button type="button" id="loading-example-btn" class="btn btn-white btn-sm">
                                            <i class="fa fa-refresh"></i> Refresh
                                        </button>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="input-group">
                                            <input type="text" placeholder="手机号或身份证进行查询" class="input-sm form-control " id="search_like" > <span class="input-group-btn">
                                                <button type="button" id="search_button" class="btn btn-sm btn-primary "> Go!</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                 <div class="x_content">     
                                    <table id="datatable-buttons" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>会员编号</th>
                                                <th>会员名称</th>
                                                <th>会员手机号</th>
                                                <th>会员身份证</th>
                                                <th>会员积分</th>
                                                <th>会员余额</th>
                                                <th style="width: 20%">操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <div class="text-c odd" role="row" th:each="r : ${page.result}">
                                               <tr>
                                                    <td>[[${r.mc_num}]]</td>
                                                    <td>[[${r.mc_name}]]</td>
                                                    <td>[[${r.mc_mobile}]]</td>
                                                    <td>[[${r.id_card}]]</td>
                                                    <td>[[${r.point}]]</td>
                                                    <td>[[${r.balance/100}]]</td>
                                                    <td style="width: 20%"></td>
                                                </tr>
                                            </div>
                                        </tbody>
                                    </table>
                                    <div th:replace="../common/page"></div>
                                    <!-- end project list -->
                                    
                                    <div class="clearfix"></div>
                      
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div th:replace="../common/foot"></div>
        </div>
    </div>
    
       <div id="templatemo-preferences-form" style="display:none;padding-left:15px;padding-right:15px">
        <div class="row">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_title" class="control-label">规则名称</label>
                <input type="text" class="form-control" id="mcr_title" value="" placeholder="会员卡规则名称">
            </div>
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_outer_type" class="control-label">会员支持类型</label>
                <select name="mcr_outer_type" class="form-control margin-bottom-15" id="mcr_outer_type">
                    <option th:value="${type.cc_num}"  th:each="type : ${all_supp_mcs}">[[${type.cc_name}]]</option>
                    <!-- <option value="10010">鼎新会员卡</option> -->
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_level" class="control-label">是否通用</label>
                <select name="mcr_level" class="form-control margin-bottom-15" id="mcr_level">
                    <option value="1">多店通用</option>
                    <option value="2">单店使用</option>
                </select>
            </div>
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_info" class="control-label">规则说明</label>
                <input type="text" class="form-control" id="mcr_info" value="" placeholder="会员卡规则说明信息">
            </div>
        </div>
        
        <!-- 内部开始 -->
        <div class="row row_inner">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_mcflk" class="control-label">规则类型</label>
                <select name="mcr_mcflk" class="form-control margin-bottom-15" id="mcr_mcflk">
                    <!-- <option value="1000">消费积分制</option> -->
                    <option value="2000">权益卡</option>
                    <option value="3000">储值卡</option>
                </select>
            </div>
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_supp_jf" class="control-label">消费积分</label>
                <select name="mcr_supp_jf" class="form-control margin-bottom-15" id="mcr_supp_jf">
                    <!-- <option value="1">支持</option> -->
                    <option value="0">不支持</option>
                </select>
            </div>
        </div>
        <div class="row" style="display:none">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_type" class="control-label">积分类型</label>
                <select name="mcr_type" class="form-control margin-bottom-15" id="mcr_type">
                    <option value="1000">固定会员制</option>
                    <option value="2000">浮动会员制</option>
                </select>
            </div>
        </div>
        <div class="has-success has-feedback row_inner">
            <div class="row">
                <div class="col-md-12 margin-bottom-15">
                    <label for="proj_config" class="control-label">说明</label><br/>
                    <!-- <span>消费积分制：会员通过消费获取积分，积分值大小决定其会员等级</span><br/> -->
                    <span>权益卡：通过购买获取线上消费折扣资格，不同等级不同折扣</span><br/>
                    <span>储值卡：支持线上储值，根据首次充值金额区别会员初始等级</span>
                    <hr>
                    <span>备注：会员规则添加后除基本信息外不可修改，请谨慎操作。每个规则下可添加多种会员等级。</span>
                </div>
            </div>
        </div>
        <!-- 内部结束 -->
        <div class="row templatemo-form-buttons">
            <div class="col-md-12">
                <button id="do_save_mcr" class="btn btn-primary">提交</button>
            </div>
        </div>
    </div>
    
    <div class="col-md-12 col-sm-12" id="check_box_list" style="display:none">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist" id="templatemo-tabs">
            <li class="active"><a href="#home" role="tab" data-toggle="tab">门店列表</a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
        </div>
        <!-- tab-content -->
    </div>
    
    <div id="templatemo-preferences-update" style="display:none;padding-left:15px;padding-right:15px">
        <div class="row">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_title_update" class="control-label">规则名称</label>
                <input type="text" class="form-control" id="mcr_title_update" value="" placeholder="会员卡规则名称">
            </div>
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_outer_type_update" class="control-label">会员支持类型</label>
                <select name="mcr_outer_type_update" class="form-control margin-bottom-15" id="mcr_outer_type_update">
                    <option th:value="${type.cc_num}"  th:each="type : ${all_supp_mcs}">[[${type.cc_name}]]</option>
                    <!-- <option value="10010">鼎新会员卡</option> -->
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_level_update" class="control-label">是否通用</label>
                <select name="mcr_leve_updatel" class="form-control margin-bottom-15" id="mcr_level_update">
                    <option value="1">多店通用</option>
                    <option value="2">单店使用</option>
                </select>
            </div>
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_info_update" class="control-label">规则说明</label>
                <input type="text" class="form-control" id="mcr_info_update" value="" placeholder="会员卡规则说明信息">
            </div>
        </div>
        
        <!-- 内部开始 -->
        <div class="row row_inner">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_mcflk_update" class="control-label">规则类型</label>
                <select name="mcr_mcflk_update" class="form-control margin-bottom-15" id="mcr_mcflk_update">
                    <!-- <option value="1000">消费积分制</option> -->
                    <option value="2000">权益卡</option>
                    <option value="3000">储值卡</option>
                </select>
            </div>
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_supp_jf_update" class="control-label">消费积分</label>
                <select name="mcr_supp_jf_update" class="form-control margin-bottom-15" id="mcr_supp_jf_update">
                    <option value="1">支持</option>
                    <option value="0">不支持</option>
                </select>
            </div>
        </div>
        <div class="row" style="display:none">
            <div class="col-md-6 margin-bottom-15">
                <label for="mcr_type_update" class="control-label">积分类型</label>
                <select name="mcr_type_update" class="form-control margin-bottom-15" id="mcr_type_update">
                    <option value="1000">固定会员制</option>
                    <option value="2000">浮动会员制</option>
                </select>
            </div>
        </div>
        <div class="has-success has-feedback row_inner">
            <div class="row">
                <div class="col-md-12 margin-bottom-15">
                    <label for="proj_config_update" class="control-label">说明</label><br/>
                    <!-- <span>消费积分制：会员通过消费获取积分，积分值大小决定其会员等级</span><br/> -->
                    <span>权益卡：通过购买获取线上消费折扣资格，不同等级不同折扣</span><br/>
                    <span>储值卡：支持线上储值，根据首次充值金额区别会员初始等级</span>
                    <hr>
                    <span>备注：会员规则添加后除基本信息外不可修改，请谨慎操作。每个规则下可添加多种会员等级。</span>
                </div>
            </div>
        </div>
        <!-- 内部结束 -->
        <div class="row templatemo-form-buttons">
            <div class="col-md-12">
                <button id="do_save_mcr_update" class="btn btn-primary">更新</button>
            </div>
        </div>
    </div>
    
    <div class="col-md-12 col-sm-12" id="check_box_list_update" style="display:none">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist" id="templatemo-tabs">
            <li class="active"><a href="#home" role="tab" data-toggle="tab">门店列表</a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
        </div>
        <!-- tab-content -->
    </div>
    
    <!-- Mainly scripts -->
    <script th:src="@{{sp}/js/jquery-2.1.1.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/bootstrap.min.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/plugins/metisMenu/jquery.metisMenu.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/plugins/slimscroll/jquery.slimscroll.min.js(sp=${pub_bucket})}"></script>

    <!-- Custom and plugin javascript -->
    <script th:src="@{{sp}/js/inspinia.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/plugins/pace/pace.min.js(sp=${pub_bucket})}"></script>
    
    <script th:src="@{{sp}/third/layer3/layer.js(sp=${pub_bucket})}" type="text/javascript"></script>

    <script>
        $(document).ready(function() {

            $('#loading-example-btn').click(function() {
                btn = $(this);
                simpleLoad(btn, true)

                // Ajax example
                //                $.ajax().always(function () {
                //                    simpleLoad($(this), false)
                //                });

                simpleLoad(btn, false)
            });
        });

        function simpleLoad(btn, state) {
            if (state) {
                btn.children().addClass('fa-spin');
                btn.contents().last().replaceWith(" Loading");
            } else {
                setTimeout(function() {
                    btn.children().removeClass('fa-spin');
                    btn.contents().last().replaceWith(" Refresh");
                }, 2000);
            }
        }
    </script>
</body>

<script type="text/javascript">
$(function() {
    var post_err_msg = "[[${error_msg}]]";
    if(post_err_msg){
        layer.msg(error_msg, {icon: 2}); 
    }
    
    $("#search_button").click(function() {
        location.href = '[[${contextPath}]]/mc/list?like=' + $("#search_like").val() + "&ts="+Date.parse(new Date());
    });
     
});
</script>

</html>
